

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced Dungeons &mdash; Dungeon Architect [UE4]  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Simple City Builder" href="builder_simple_city.html" />
    <link rel="prev" title="Advanced Theming" href="advanced_theming.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Dungeon Architect [UE4]
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="create_first_dungeon.html">Create your first Dungeon</a></li>
<li class="toctree-l1"><a class="reference internal" href="design_first_theme.html">Design your first theme</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch_pad.html">Launch Pad Window</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_grid_flow.html">Grid Flow Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_snap_flow.html">Snap Flow Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_grid.html">Grid Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_theming.html">Advanced Theming</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Dungeons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#marker-emitters">Marker Emitters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-marker-emitter">Creating a Marker Emitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#theme-preview">Theme Preview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-1">Example #1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-2">Example #2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-3">Example #3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#query-interface">Query Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#access-the-query-interface">Access the Query Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grid-query-interface">Grid Query Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-cells">Get Cells</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cells-of-type">Get Cells Of Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cell-dimension">Get Cell Dimension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-path-between-cells">Get Path Between Cells</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-furthest-rooms">Get Furthest Rooms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cell-at-location">Get Cell At Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cell-type">Get Cell Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-random-cell">Get Random Cell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-random-cell-of-type">Get Random Cell Of Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contains-stair-between">Contains Stair Between</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contains-door-between">Contains Door Between</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stair-between">Get Stair Between</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-opening-point-between-adjacent-cells">Get Opening Point Between Adjacent Cells</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-adjacent-cells-on-edge">Get Adjacent Cells On Edge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#is-near-marker">Is Near Marker</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#event-listeners">Event Listeners</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creation">Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#event-callbacks">Event Callbacks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-pre-dungeon-build">On Pre Dungeon Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-dungeon-layout-built">On Dungeon Layout Built</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-markers-emitted">On Markers Emitted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-post-dungeon-build">On Post Dungeon Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-pre-dungeon-destroy">On Pre Dungeon Destroy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-dungeon-destroyed">On Dungeon Destroyed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#landscape-transformer">Landscape Transformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#navigation">Navigation</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">MORE BUILDERS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="builder_simple_city.html">Simple City Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_floor_plan.html">Floor Plan Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_isaac.html">Isaac Builder</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Dungeon Architect [UE4]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Advanced Dungeons</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-dungeons">
<h1>Advanced Dungeons<a class="headerlink" href="#advanced-dungeons" title="Permalink to this headline">¶</a></h1>
<div class="section" id="marker-emitters">
<h2>Marker Emitters<a class="headerlink" href="#marker-emitters" title="Permalink to this headline">¶</a></h2>
<p>Marker Emitters are blueprint scripts (or C++) that lets you emit your own markers anywhere in the map</p>
<div class="figure align-center" id="id1">
<img alt="_images/da_design_me.png" src="_images/da_design_me.png" />
<p class="caption"><span class="caption-text">Architecture</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>As seen previously, <em>Markers</em> are emitted by the Dungeon Builder class around the layout of the dungeon (e.g. Wall, Ground, Fence etc) and you can insert actors at that location from the Theme graph.  You can even create your own markers emitted off of those parent markers, but without <em>Marker Emitters</em> you are restricted to the starting markers the dungeon builder has initially emitted for you</p>
<p>Marker Emitters gives you a lot of flexibility and you can query the dungeon model and emit markers anywhere in the map</p>
<p>A Marker Emitter is invoked right after the Dungeon Builder emits all the markers for the dungeon (Ground, Wall etc)</p>
<div class="section" id="creating-a-marker-emitter">
<h3>Creating a Marker Emitter<a class="headerlink" href="#creating-a-marker-emitter" title="Permalink to this headline">¶</a></h3>
<p>Create a new Blueprint class derived from DungeonMarkerEmitter</p>
<div class="figure align-center" id="id2">
<img alt="_images/create_marker_emiter_dialog.png" src="_images/create_marker_emiter_dialog.png" />
<p class="caption"><span class="caption-text">Create a new marker emitter</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Assign the created blueprint marker emitter to the Dungeon Actor</p>
<div class="figure align-center" id="id3">
<img alt="_images/assign_marker_emitter.png" src="_images/assign_marker_emitter.png" />
<p class="caption"><span class="caption-text">Assign to the Dungeon actor</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Start placing your logic in the blueprint by overriding the <strong>Emit Markers</strong> function</p>
<div class="figure align-center" id="id4">
<img alt="_images/marker_emitter_04.png" src="_images/marker_emitter_04.png" />
<p class="caption"><span class="caption-text">Override the EmitMarkers function</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>This method is invoked by the engine and lets you emit as many markers as you like into the scene with any transforms.</p>
<p>To emit a marker, create a <em>Emit Marker</em> node</p>
<div class="figure align-center" id="id5">
<img alt="_images/marker_emitter_05.png" src="_images/marker_emitter_05.png" />
<p class="caption"><span class="caption-text">Emit Marker Node</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>You can emit as many markers as you like</p>
</div>
<div class="section" id="theme-preview">
<h3>Theme Preview<a class="headerlink" href="#theme-preview" title="Permalink to this headline">¶</a></h3>
<p>If you want to preview your marker emitter logic in the Theme Editor’s 3D Preview viewport,  you can set it up like this:</p>
<p>Navigate to the theme editor’s 3D Viewport &gt; Properties &gt; Dungeon</p>
<div class="figure align-center" id="id6">
<img alt="_images/marker_emitter_te_1.png" src="_images/marker_emitter_te_1.png" />
<p class="caption"><span class="caption-text">Theme Editor’s 3D Viewport &gt; Properties &gt; Dungeon</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>This will open up the dungeon properties. Add your marker emitter there and the preview viewport will pick up the markers emitted by your Marker Emitter blueprint script and show it in the preview viewport</p>
<div class="figure align-center" id="id7">
<img alt="_images/marker_emitter_te_2.jpg" src="_images/marker_emitter_te_2.jpg" />
<p class="caption"><span class="caption-text">Theme Editor’s 3D Viewport &gt; Properties &gt; Dungeon</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="example-1">
<h3>Example #1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<p>This marker emitter queries the dungeon model and emits a marker at the center of all the rooms</p>
<div class="figure align-center" id="id8">
<img alt="_images/marker_emitter_eg1_1.png" src="_images/marker_emitter_eg1_1.png" />
<p class="caption"><span class="caption-text">Sample Marker Emitter</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id9">
<img alt="_images/marker_emitter_eg1_2.png" src="_images/marker_emitter_eg1_2.png" />
<p class="caption"><span class="caption-text">Marker Emitted with this name</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id10">
<img alt="_images/marker_emitter_eg1_3.png" src="_images/marker_emitter_eg1_3.png" />
<p class="caption"><span class="caption-text">Create a Marker node with the same name</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id11">
<img alt="_images/marker_emitter_eg1_4.png" src="_images/marker_emitter_eg1_4.png" />
<p class="caption"><span class="caption-text">Theming engine picks it up and inserts it in the middle of the room</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="example-2">
<h3>Example #2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h3>
<p>The <em>Hell Forge</em> demo has a good looking cave like system generated using Marker Emitters.</p>
<p>Since the rocks for the cave walls cannot be inserted in the Wall and Fence markers (as they are big and would block the passage), we need to find positions in the empty space that are further away from the walls and fences</p>
<p>This is done with a marker emitter blueprint <cite>DA_InfinityBlade_Fire/Dungeons/Rules/MarkerEmitter/BPM_AdjacentCellEmitter</cite></p>
<div class="figure align-center" id="id12">
<img alt="_images/marker_emitter_eg2_1.png" src="_images/marker_emitter_eg2_1.png" />
<p class="caption"><span class="caption-text">Visualizing the emitter with different colored cubes</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id13">
<img alt="_images/marker_emitter_eg2_2.jpg" src="_images/marker_emitter_eg2_2.jpg" />
<p class="caption"><span class="caption-text">Visualizing the emitter with different colored cubes</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>The Hell Forge theme applies rocks to these markers (EmptySpaceN) and increases their scale as they move further away from the the ground</p>
<div class="figure align-center" id="id14">
<img alt="_images/marker_emitter_eg2_3.jpg" src="_images/marker_emitter_eg2_3.jpg" />
<p class="caption"><span class="caption-text">Theme to create Mountains using a Marker Emitter</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<p>This gives a nice progressive elevation to the mountains giving the impression that the pathways are naturally formed</p>
<div class="figure align-center" id="id15">
<img alt="_images/marker_emitter_eg2_4.jpg" src="_images/marker_emitter_eg2_4.jpg" />
<p class="caption"><span class="caption-text">Hell Forge theme with Mountains and Caves</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="example-3">
<h3>Example #3<a class="headerlink" href="#example-3" title="Permalink to this headline">¶</a></h3>
<p>Heres another example of a curved roof created over a room using marker emitters</p>
<div class="figure align-center">
<img alt="_images/marker_emitter_eg3_1.jpg" src="_images/marker_emitter_eg3_1.jpg" />
</div>
<div class="figure align-center">
<img alt="_images/marker_emitter_eg3_2.jpg" src="_images/marker_emitter_eg3_2.jpg" />
</div>
<div class="figure align-center">
<img alt="_images/marker_emitter_eg3_3.jpg" src="_images/marker_emitter_eg3_3.jpg" />
</div>
</div>
</div>
<div class="section" id="query-interface">
<h2>Query Interface<a class="headerlink" href="#query-interface" title="Permalink to this headline">¶</a></h2>
<p>The query interface has various helper functions to query the structure of the dungeon.    You can use the query interface in your selector / transform logics or marker emitters for more control</p>
<p>Each builder implements its own query interface.</p>
<div class="section" id="access-the-query-interface">
<h3>Access the Query Interface<a class="headerlink" href="#access-the-query-interface" title="Permalink to this headline">¶</a></h3>
<p>You can access the query interface from different places</p>
<div class="figure align-center" id="id16">
<img alt="_images/query_interface_access_selector_logic.png" src="_images/query_interface_access_selector_logic.png" />
<p class="caption"><span class="caption-text">Query interface in the selection rule</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id17">
<img alt="_images/query_interface_access_transform_logic.png" src="_images/query_interface_access_transform_logic.png" />
<p class="caption"><span class="caption-text">Query interface in the transformer rule</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id18">
<img alt="_images/query_interface_access_marker_emiter.png" src="_images/query_interface_access_marker_emiter.png" />
<p class="caption"><span class="caption-text">Query interface in the marker emitter</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id19">
<img alt="_images/query_interface_access_dungeon_actor.png" src="_images/query_interface_access_dungeon_actor.png" />
<p class="caption"><span class="caption-text">Query interface from other blueprints</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="grid-query-interface">
<h3>Grid Query Interface<a class="headerlink" href="#grid-query-interface" title="Permalink to this headline">¶</a></h3>
<p>The Grid Query Interface lets you query the structure of a grid builder based dungeon</p>
<div class="section" id="get-cells">
<h4>Get Cells<a class="headerlink" href="#get-cells" title="Permalink to this headline">¶</a></h4>
<p>Gets a list of all the Cell IDs in the dungeon. A corridor patch or a room is a cell. A cell is always rectangular in shape, with a center and size</p>
<div class="figure align-center" id="id20">
<img alt="_images/query_grid_GetCells.png" src="_images/query_grid_GetCells.png" />
<p class="caption"><span class="caption-text">Get Cells</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-cells-of-type">
<h4>Get Cells Of Type<a class="headerlink" href="#get-cells-of-type" title="Permalink to this headline">¶</a></h4>
<p>Similar to Get Cells function but filters the cells based on a type (Room, Coordor)</p>
<div class="figure align-center" id="id21">
<img alt="_images/query_grid_GetCellsOfType.png" src="_images/query_grid_GetCellsOfType.png" />
<p class="caption"><span class="caption-text">Get Cells Of Type</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-cell-dimension">
<h4>Get Cell Dimension<a class="headerlink" href="#get-cell-dimension" title="Permalink to this headline">¶</a></h4>
<p>Gets the dimension of a cell.  This takes in a cell id and will return the center and the size of the cell</p>
<div class="figure align-center" id="id22">
<img alt="_images/query_grid_GetCellDimension.png" src="_images/query_grid_GetCellDimension.png" />
<p class="caption"><span class="caption-text">Get Cell Dimension</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-path-between-cells">
<h4>Get Path Between Cells<a class="headerlink" href="#get-path-between-cells" title="Permalink to this headline">¶</a></h4>
<p>Gets a valid path between any two cell points.  This can be used to create waypoints in your game.  There is an example in the quick start guide demonstrating this</p>
<div class="figure align-center" id="id23">
<img alt="_images/query_grid_GetPathBetweenCells.png" src="_images/query_grid_GetPathBetweenCells.png" />
<p class="caption"><span class="caption-text">Get Path Between Cells</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id24">
<img alt="_images/query_grid_path.jpg" src="_images/query_grid_path.jpg" />
<p class="caption"><span class="caption-text">Query path between two cells</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-furthest-rooms">
<h4>Get Furthest Rooms<a class="headerlink" href="#get-furthest-rooms" title="Permalink to this headline">¶</a></h4>
<p>Find the furthest rooms in the dungeon.   This function returns two cell ID.  This can be useful for setting the start / end rooms (or spawn / boss rooms)</p>
<div class="figure align-center" id="id25">
<img alt="_images/query_grid_GetFurthestRooms.png" src="_images/query_grid_GetFurthestRooms.png" />
<p class="caption"><span class="caption-text">Get Furthest Rooms</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-cell-at-location">
<h4>Get Cell At Location<a class="headerlink" href="#get-cell-at-location" title="Permalink to this headline">¶</a></h4>
<p>Pass in a world location and get the cell id.  This is useful for finding the cell an actor is in.   For e.g., if you’d like to check if all NPCs in a room are dead before unlocking a door, you would iterate through all the actors and check if they are in the same room the player is in</p>
<div class="figure align-center" id="id26">
<img alt="_images/query_grid_GetCellAtLocation.png" src="_images/query_grid_GetCellAtLocation.png" />
<p class="caption"><span class="caption-text">Get Cell At Location</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-cell-type">
<h4>Get Cell Type<a class="headerlink" href="#get-cell-type" title="Permalink to this headline">¶</a></h4>
<p>Find the type of the cell (Room, corridor).    There is another category called CorridorPadding, which should also be considered a Corridor</p>
<div class="figure align-center" id="id27">
<img alt="_images/query_grid_GetCellType.png" src="_images/query_grid_GetCellType.png" />
<p class="caption"><span class="caption-text">Get Cell Type</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-random-cell">
<h4>Get Random Cell<a class="headerlink" href="#get-random-cell" title="Permalink to this headline">¶</a></h4>
<p>Gets a random cell from the dungeon.</p>
<p>There also a version that takes in a random stream. You should use the random stream version if you want to guarantee the same dungeon for a particular configuration. The dungeon’s random stream is access from within the selector and transform rules</p>
<div class="figure align-center" id="id28">
<img alt="_images/query_grid_GetRandomCell.png" src="_images/query_grid_GetRandomCell.png" />
<p class="caption"><span class="caption-text">Get Random Cell</span><a class="headerlink" href="#id28" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-random-cell-of-type">
<h4>Get Random Cell Of Type<a class="headerlink" href="#get-random-cell-of-type" title="Permalink to this headline">¶</a></h4>
<p>Gets a random cell of a particular type from the dungeon.</p>
<p>There also a version that takes in a random stream. You should use the random stream version if you want to guarantee the same dungeon for a particular configuration. The dungeon’s random stream is access from within the selector and transform rules</p>
<div class="figure align-center" id="id29">
<img alt="_images/query_grid_GetRandomCellOfType.png" src="_images/query_grid_GetRandomCellOfType.png" />
<p class="caption"><span class="caption-text">Get Random Cell Of Type</span><a class="headerlink" href="#id29" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="contains-stair-between">
<h4>Contains Stair Between<a class="headerlink" href="#contains-stair-between" title="Permalink to this headline">¶</a></h4>
<p>Check if there is a stair connecting the two input cells</p>
<div class="figure align-center" id="id30">
<img alt="_images/query_grid_ContainsStairBetween.png" src="_images/query_grid_ContainsStairBetween.png" />
<p class="caption"><span class="caption-text">Contains Stair Between</span><a class="headerlink" href="#id30" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="contains-door-between">
<h4>Contains Door Between<a class="headerlink" href="#contains-door-between" title="Permalink to this headline">¶</a></h4>
<p>Check if there is a door connecting the two input cells</p>
<div class="figure align-center" id="id31">
<img alt="_images/query_grid_ContainsDoorBetween.png" src="_images/query_grid_ContainsDoorBetween.png" />
<p class="caption"><span class="caption-text">Contains Door Between</span><a class="headerlink" href="#id31" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-stair-between">
<h4>Get Stair Between<a class="headerlink" href="#get-stair-between" title="Permalink to this headline">¶</a></h4>
<p>Get the stair information between the two input cells</p>
<div class="figure align-center" id="id32">
<img alt="_images/query_grid_GetStairBetween.png" src="_images/query_grid_GetStairBetween.png" />
<p class="caption"><span class="caption-text">Get Stair Between</span><a class="headerlink" href="#id32" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-opening-point-between-adjacent-cells">
<h4>Get Opening Point Between Adjacent Cells<a class="headerlink" href="#get-opening-point-between-adjacent-cells" title="Permalink to this headline">¶</a></h4>
<p>When two cells are adjacent to each other, there might be a constraint on how we can traverse through them. There might be a height variation, or there might be a wall between the cells.  In that case, the only valid way to move across is through the stair or a door repectively.   This function calculates and returns the correct world position.  This position lies in the edge of the two cells.  If there is no barrier between the two cells (doors / stairs) a point in the center of the edge is returned</p>
<div class="figure align-center" id="id33">
<img alt="_images/query_grid_GetOpeningPointBetweenAdjacentCells.png" src="_images/query_grid_GetOpeningPointBetweenAdjacentCells.png" />
<p class="caption"><span class="caption-text">Get Opening Point Between Adjacent Cells</span><a class="headerlink" href="#id33" title="Permalink to this image">¶</a></p>
</div>
<p>This function is used in the path demo to correctly place the spline through the doors and stairs</p>
<div class="figure align-center" id="id34">
<img alt="_images/query_grid_path.jpg" src="_images/query_grid_path.jpg" />
<p class="caption"><span class="caption-text">Query path between two cells</span><a class="headerlink" href="#id34" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="get-adjacent-cells-on-edge">
<h4>Get Adjacent Cells On Edge<a class="headerlink" href="#get-adjacent-cells-on-edge" title="Permalink to this headline">¶</a></h4>
<div class="figure align-center" id="id35">
<img alt="_images/query_grid_GetAdjacentCellsOnEdge.png" src="_images/query_grid_GetAdjacentCellsOnEdge.png" />
<p class="caption"><span class="caption-text">Get Adjacent Cells On Edge</span><a class="headerlink" href="#id35" title="Permalink to this image">¶</a></p>
</div>
<p>You can use this function in a selector logic of a marker that is on the edge (e.g. Walls / Fence).   This function returns the cells adjacent to the marker.   You can use it to decorate your walls / fence selectively. E.g. do no spawn lights on walls of an empty side, or have a different art style when a wall is shared by two rooms</p>
</div>
<div class="section" id="is-near-marker">
<h4>Is Near Marker<a class="headerlink" href="#is-near-marker" title="Permalink to this headline">¶</a></h4>
<div class="figure align-center" id="id36">
<img alt="_images/query_grid_IsNearMarker.png" src="_images/query_grid_IsNearMarker.png" />
<p class="caption"><span class="caption-text">Is Near Marker</span><a class="headerlink" href="#id36" title="Permalink to this image">¶</a></p>
</div>
<p>The function returns true if a marker with the specified name is found nearby.    You specify the distance to search and the marker name.</p>
<p>This function is useful if you don’t want to place blocking items near doors / stairs.</p>
<div class="figure align-center" id="id37">
<img alt="_images/query_grid_near_marker_1.png" src="_images/query_grid_near_marker_1.png" />
<p class="caption"><span class="caption-text">Query System</span><a class="headerlink" href="#id37" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id38">
<img alt="_images/query_grid_near_marker_2.png" src="_images/query_grid_near_marker_2.png" />
<p class="caption"><span class="caption-text">Query System</span><a class="headerlink" href="#id38" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="event-listeners">
<h2>Event Listeners<a class="headerlink" href="#event-listeners" title="Permalink to this headline">¶</a></h2>
<p>Event listeners are blueprints that get notified on various dungeon events. These are great for pre / post initializations</p>
<div class="section" id="creation">
<h3>Creation<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h3>
<p>Create a Event listener blueprint by choosing <cite>DungeonEventListener</cite> as the base class</p>
<div class="figure align-center" id="id39">
<img alt="_images/event_listener_create.png" src="_images/event_listener_create.png" />
<p class="caption"><span class="caption-text">Event Listener</span><a class="headerlink" href="#id39" title="Permalink to this image">¶</a></p>
</div>
<p>Override any of the function events to get notified.  This function will be called by Dungeon Architect if your blueprint is registered with the Dungeon actor</p>
<div class="figure align-center" id="id40">
<img alt="_images/event_listener_create2.png" src="_images/event_listener_create2.png" />
<p class="caption"><span class="caption-text">Event Listener</span><a class="headerlink" href="#id40" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="registration">
<h3>Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h3>
<p>You need to register this blueprint with the dungeon actor to get its event notifications</p>
<p>Select the Dungeon Actor and Navigate to the <cite>Advanced</cite> category in the Details tab and choose your blueprint class</p>
<div class="figure align-center" id="id41">
<img alt="_images/event_listener_create3.png" src="_images/event_listener_create3.png" />
<p class="caption"><span class="caption-text">Event Listener</span><a class="headerlink" href="#id41" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="event-callbacks">
<h3>Event Callbacks<a class="headerlink" href="#event-callbacks" title="Permalink to this headline">¶</a></h3>
<p>Your blueprint can hook into various events of the dungeon build / destroy phase</p>
<div class="section" id="on-pre-dungeon-build">
<h4>On Pre Dungeon Build<a class="headerlink" href="#on-pre-dungeon-build" title="Permalink to this headline">¶</a></h4>
<p>This is called before the dungeon is built</p>
</div>
<div class="section" id="on-dungeon-layout-built">
<h4>On Dungeon Layout Built<a class="headerlink" href="#on-dungeon-layout-built" title="Permalink to this headline">¶</a></h4>
<p>This is called after the dungeon layout is built in memory.  At this stage, no markers are emitted on the scene and nothing is spawned.  However, the layout is available in the dungeon model if you’d like to view or modify it</p>
</div>
<div class="section" id="on-markers-emitted">
<h4>On Markers Emitted<a class="headerlink" href="#on-markers-emitted" title="Permalink to this headline">¶</a></h4>
<p>This event is called after all the markers are emitted in the scene.   This event is also called right before the Theming engine is executed.    So this event gives you an oppertunity to modify the low markers themselves</p>
<p>This could be useful for automatically clamping dungeon items on a landscape or to apply some filter on the markers like the one shown below (see quick start guide for an example)</p>
<div class="figure align-center" id="id42">
<img alt="_images/event_listener_filter.jpg" src="_images/event_listener_filter.jpg" />
<p class="caption"><span class="caption-text">Event Listener</span><a class="headerlink" href="#id42" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="on-post-dungeon-build">
<h4>On Post Dungeon Build<a class="headerlink" href="#on-post-dungeon-build" title="Permalink to this headline">¶</a></h4>
<p>This is called after the dungeon is fully built</p>
</div>
<div class="section" id="on-pre-dungeon-destroy">
<h4>On Pre Dungeon Destroy<a class="headerlink" href="#on-pre-dungeon-destroy" title="Permalink to this headline">¶</a></h4>
<p>This is called right before the dungeon is about to be destroyed</p>
</div>
<div class="section" id="on-dungeon-destroyed">
<h4>On Dungeon Destroyed<a class="headerlink" href="#on-dungeon-destroyed" title="Permalink to this headline">¶</a></h4>
<p>This is called after the dungeon is fully destroyed</p>
</div>
</div>
</div>
<div class="section" id="landscape-transformer">
<h2>Landscape Transformer<a class="headerlink" href="#landscape-transformer" title="Permalink to this headline">¶</a></h2>
<p>Using the Landscape Transformer, you can modify a landscape’s height and weights (textures) around the dungeon’s layout</p>
<p>The landscape transformer is implemented as a event listener, so you’ll need to register it in the Dungeon actor’s event listener list under the Advanced category</p>
<div class="figure align-center" id="id43">
<img alt="_images/landscape_transformer.png" src="_images/landscape_transformer.png" />
<p class="caption"><span class="caption-text">Landscape Transformer</span><a class="headerlink" href="#id43" title="Permalink to this image">¶</a></p>
</div>
<p>After setting the landscape transformer, expand it and set the Landscape you’d wish to modify</p>
<div class="figure align-center" id="id44">
<img alt="_images/landscape_transformer2.png" src="_images/landscape_transformer2.png" />
<p class="caption"><span class="caption-text">Landscape Transformer</span><a class="headerlink" href="#id44" title="Permalink to this image">¶</a></p>
</div>
<p>Under the Layers array, add two entries</p>
<p>The first entry should be the Layer Info for filling the entire area
The second entry is for the inner path way.</p>
<p>You would have already created these layer info assets while creating the landscape and setting up the material</p>
<p>To find where you layer info is, Navigate to the Landscape tab &gt; Paint section.  There you’d see entries for each layer that was defined in your material.   If you didn’t create a layer info yet, create one or click the Find icon to find where it is.  Then assign the appropriate layer</p>
<div class="figure align-center" id="id45">
<img alt="_images/landscape_transformer_layer.png" src="_images/landscape_transformer_layer.png" />
<p class="caption"><span class="caption-text">Landscape Transformer</span><a class="headerlink" href="#id45" title="Permalink to this image">¶</a></p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/9MI9IzNytuY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<div class="section" id="navigation">
<h2>Navigation<a class="headerlink" href="#navigation" title="Permalink to this headline">¶</a></h2>
<p>Unreal Engine supports runtime navigation generation.   However, a flag needs to be set in the projects setting.</p>
<p>Navigate to <cite>Edit &gt; Project Settings &gt; Navgation Mesh &gt; Runtime &gt; Dynamic</cite></p>
<div class="figure align-center" id="id46">
<img alt="_images/navmesh_1.png" src="_images/navmesh_1.png" />
<p class="caption"><span class="caption-text">Runtime Navigation Mesh Generation</span><a class="headerlink" href="#id46" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id47">
<img alt="_images/navmesh_2.png" src="_images/navmesh_2.png" />
<p class="caption"><span class="caption-text">Runtime Navigation Mesh Generation</span><a class="headerlink" href="#id47" title="Permalink to this image">¶</a></p>
</div>
<p>This will automatically regenerate the navigation on runtime generated dungeons.  Be sure to have a <cite>Nav Mesh bounds Volume</cite> large enough to wrap the whole dungeon.  There is an example in the quick start guide to automatically wrap the navigation volume around a dungeon after it has been built.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uowWAVwEiEc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="builder_simple_city.html" class="btn btn-neutral float-right" title="Simple City Builder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="advanced_theming.html" class="btn btn-neutral float-left" title="Advanced Theming" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Code Respawn

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>