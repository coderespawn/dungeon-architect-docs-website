

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Grid Flow Builder &mdash; Dungeon Architect [UE4]  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Snap Flow Builder" href="builder_snap_flow.html" />
    <link rel="prev" title="Launch Pad Window" href="launch_pad.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Dungeon Architect [UE4]
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="create_first_dungeon.html">Create your first Dungeon</a></li>
<li class="toctree-l1"><a class="reference internal" href="design_first_theme.html">Design your first theme</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch_pad.html">Launch Pad Window</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Grid Flow Builder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-grid-flow-dungeon">Create a Grid Flow Dungeon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-dungeon-actor">Setup Dungeon Actor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-theme">Setup Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-gridflow-graph">Setup GridFlow Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-dungeon">Build Dungeon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grid-flow-editor">Grid Flow Editor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#explore-grid-flow-graph">Explore Grid Flow Graph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#editor-panels">Editor Panels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execution-graph-panel">Execution Graph Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#layout-graph-panel">Layout Graph Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tilemap-panel">Tilemap Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preview-viewport-panel">Preview Viewport Panel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#design-a-gridflow-graph">Design a GridFlow Graph</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-grid">Create Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-main-path">Create Main Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-alternate-path">Create Alternate Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-treasure-room-main">Create Treasure Room (Main)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-treasure-room-alt">Create Treasure Room (Alt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-key-room">Create Key Room</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-key-lock-main">Create Key-Lock (Main)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-key-lock-treasure-main">Create Key-Lock (Treasure Main)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spawn-enemies-main-alt">Spawn Enemies (Main, Alt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spawn-bonus-treasure-chests">Spawn Bonus (Treasure Chests)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spawn-key-guardian">Spawn Key Guardian</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spawn-health-pack">Spawn Health Pack</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finalize-layout-graph">Finalize Layout Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-tilemap">Create Tilemap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-viewport">3D Viewport</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-background-elevation">Add Background Elevation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-grass-overlays">Add Grass Overlays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finalize-tilemap">Finalize Tilemap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimize-tilemap">Optimize Tilemap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#key-lock-system">Key Lock System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample">Sample</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mini-map">Mini-Map</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#minimap-tracked-objects">Minimap Tracked Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="builder_snap_flow.html">Snap Flow Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_grid.html">Grid Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_theming.html">Advanced Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_dungeon_concepts.html">Advanced Dungeons</a></li>
</ul>
<p class="caption"><span class="caption-text">MORE BUILDERS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="builder_simple_city.html">Simple City Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_floor_plan.html">Floor Plan Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_isaac.html">Isaac Builder</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="manual_installation.html">Manual Installation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Dungeon Architect [UE4]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Grid Flow Builder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grid-flow-builder">
<h1>Grid Flow Builder<a class="headerlink" href="#grid-flow-builder" title="Permalink to this headline">¶</a></h1>
<p>The Grid Flow Builder offers a rich set of tools to control the flow of your dungeons and item placement</p>
<div class="section" id="create-a-grid-flow-dungeon">
<h2>Create a Grid Flow Dungeon<a class="headerlink" href="#create-a-grid-flow-dungeon" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup-dungeon-actor">
<h3>Setup Dungeon Actor<a class="headerlink" href="#setup-dungeon-actor" title="Permalink to this headline">¶</a></h3>
<p>Create a new Level and drop in a dungeon actor</p>
<img alt="_images/02.jpg" class="align-center" src="_images/02.jpg" />
<p>Inspect the properties of the dungeon actor you just dropped.   Set the <cite>Builder Class</cite> to <code class="docutils literal notranslate"><span class="pre">GridFlowBuilder</span></code></p>
<img alt="_images/01.png" class="align-center" src="_images/01.png" />
</div>
<div class="section" id="setup-theme">
<h3>Setup Theme<a class="headerlink" href="#setup-theme" title="Permalink to this headline">¶</a></h3>
<p>Click the <code class="docutils literal notranslate"><span class="pre">+</span></code> icon next to the Themes array to create a new theme entry.</p>
<img alt="_images/02A.png" class="align-center" src="_images/02A.png" />
<p>Here we’ll assign an existing theme from the samples folder.  For this, we’ll need to enable <cite>Show Plugin Content</cite> from the view options</p>
<img alt="_images/02B.png" class="align-center" src="_images/02B.png" />
<img alt="_images/02C.png" class="align-center" src="_images/02C.png" />
<p>We’ll assign the theme <code class="docutils literal notranslate"><span class="pre">T_DefaultGridFlow</span></code>.</p>
<img alt="_images/031.png" class="align-center" src="_images/031.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above theme theme file is under <cite>Dungeon Architect Content &gt; Builders &gt; GridFlowContent &gt; Theme</cite> folder</p>
<img alt="_images/04.png" class="align-center" src="_images/04.png" />
</div>
</div>
<div class="section" id="setup-gridflow-graph">
<h3>Setup GridFlow Graph<a class="headerlink" href="#setup-gridflow-graph" title="Permalink to this headline">¶</a></h3>
<p>This builder requires another asset called the <cite>Grid Flow Graph</cite>.   This is a graph that helps you  control the flow of your dungeon. In this section, we’ll use an existing graph from the samples folder</p>
<p>Select the Dungeon actor and in the <cite>Grid Flow</cite> setting assign the following asset <code class="docutils literal notranslate"><span class="pre">DefaultGridFlow</span></code>.  This is in the folder <cite>Dungeon Architect Content &gt; Builders &gt; GridFlowContent &gt; FlowGraph</cite></p>
<img alt="_images/051.png" class="align-center" src="_images/051.png" />
<img alt="_images/06.png" class="align-center" src="_images/06.png" />
<img alt="_images/07.png" class="align-center" src="_images/07.png" />
</div>
<div class="section" id="build-dungeon">
<h3>Build Dungeon<a class="headerlink" href="#build-dungeon" title="Permalink to this headline">¶</a></h3>
<p>Select the Dungeon actor and click <cite>Build Dungeon</cite> button from the Details panel</p>
<div class="figure align-center" id="id1">
<img alt="_images/09.jpg" src="_images/09.jpg" />
<p class="caption"><span class="caption-text">GridFlow dungeon built using the sample theme</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id2">
<img alt="_images/081.jpg" src="_images/081.jpg" />
<p class="caption"><span class="caption-text">GridFlow dungeons support key-locks</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="grid-flow-editor">
<h2>Grid Flow Editor<a class="headerlink" href="#grid-flow-editor" title="Permalink to this headline">¶</a></h2>
<p>Let’s open the GridFlow asset in the editor:</p>
<p>Navigate to <code class="docutils literal notranslate"><span class="pre">Dungeon</span> <span class="pre">Architect</span> <span class="pre">Content</span> <span class="pre">&gt;</span> <span class="pre">Builders</span> <span class="pre">&gt;</span> <span class="pre">GridFlowContent</span> <span class="pre">&gt;</span> <span class="pre">FlowGraph</span></code> and double click on <code class="docutils literal notranslate"><span class="pre">DefaultGridFlow</span></code></p>
<p>This will open the <cite>Grid Flow Editor</cite></p>
<div class="figure align-center" id="id3">
<img alt="_images/10.jpg" src="_images/10.jpg" />
<p class="caption"><span class="caption-text">Grid Flow Editor</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Click the Build button toolbar to build the graph</p>
<img alt="_images/11.png" class="align-center" src="_images/11.png" />
<img alt="_images/12.jpg" class="align-center" src="_images/12.jpg" />
<p>Keep hitting build to get a new dungeon</p>
<img alt="_images/131.gif" class="align-center" src="_images/131.gif" />
<div class="section" id="explore-grid-flow-graph">
<h3>Explore Grid Flow Graph<a class="headerlink" href="#explore-grid-flow-graph" title="Permalink to this headline">¶</a></h3>
<p>After you’ve built a dungeon in the editor (by hitting the <cite>Build</cite> button on the toolbar), you can select each node in the execution graph and see how the dungeon layout was built, as shown in the lower preview panels</p>
<div class="figure align-center" id="id4">
<img alt="_images/15.gif" src="_images/15.gif" />
<p class="caption"><span class="caption-text">Select an execution graph node to preview the build process</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="editor-panels">
<h2>Editor Panels<a class="headerlink" href="#editor-panels" title="Permalink to this headline">¶</a></h2>
<p>The Grid Flow Editor has the following panels</p>
<div class="section" id="execution-graph-panel">
<h3>Execution Graph Panel<a class="headerlink" href="#execution-graph-panel" title="Permalink to this headline">¶</a></h3>
<p>This is where you design the flow of your dungeon. All other panels are for previewing the result of this panel</p>
<img alt="_images/14A.jpg" class="align-center" src="_images/14A.jpg" />
</div>
<div class="section" id="layout-graph-panel">
<h3>Layout Graph Panel<a class="headerlink" href="#layout-graph-panel" title="Permalink to this headline">¶</a></h3>
<p>The initial level is designed in a higher level layout graph</p>
<img alt="_images/14B.jpg" class="align-center" src="_images/14B.jpg" />
</div>
<div class="section" id="tilemap-panel">
<h3>Tilemap Panel<a class="headerlink" href="#tilemap-panel" title="Permalink to this headline">¶</a></h3>
<p>The result of the layout graph is eventually transferred over to a tilemap. The resulting tilemap is previewed here</p>
<img alt="_images/14C.jpg" class="align-center" src="_images/14C.jpg" />
</div>
<div class="section" id="preview-viewport-panel">
<h3>Preview Viewport Panel<a class="headerlink" href="#preview-viewport-panel" title="Permalink to this headline">¶</a></h3>
<p>The 3D representation of the final Dungeon</p>
<img alt="_images/14D.jpg" class="align-center" src="_images/14D.jpg" />
</div>
</div>
<div class="section" id="design-a-gridflow-graph">
<h2>Design a GridFlow Graph<a class="headerlink" href="#design-a-gridflow-graph" title="Permalink to this headline">¶</a></h2>
<p>In the previous section, we used an existing Grid Flow graph from the samples folder. In this section, we’ll design one ourselves.</p>
<div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>Close the Grid Flow Editor, if open</p>
<p>Right click on the <cite>Content Browser</cite> and choose Dungeon Architect &gt; Grid Flow.  This will create a new Grid Flow asset. Rename it to something appropriate and double click to open it in the <cite>Grid Flow Editor</cite></p>
<img alt="_images/18.png" class="align-center" src="_images/18.png" />
<img alt="_images/17.jpg" class="align-center" src="_images/17.jpg" />
<p>Notice that there is only one node in the Execution graph, the <code class="docutils literal notranslate"><span class="pre">Result</span></code> node.   Our final output should be connected to this node</p>
</div>
<div class="section" id="create-grid">
<h3>Create Grid<a class="headerlink" href="#create-grid" title="Permalink to this headline">¶</a></h3>
<p>Right click on an empty area in the Execution Graph and from the context menu select <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Grid</span></code></p>
<img alt="_images/19.png" class="align-center" src="_images/19.png" />
<p>Connect this node to the <code class="docutils literal notranslate"><span class="pre">Result</span></code> node and click the <code class="docutils literal notranslate"><span class="pre">Build</span></code> button in the toolbar</p>
<img alt="_images/20.png" class="align-center" src="_images/20.png" />
<img alt="_images/11.png" class="align-center" src="_images/11.png" />
<p>This node creates an initial grid to work with</p>
<img alt="_images/21.png" class="align-center" src="_images/21.png" />
<p>We’ll be designing our layout in this grid.   This allows us to work on a higher level abstract graph, making it easier to control the flow.   It will then be transferred over to a tilemap</p>
</div>
<div class="section" id="create-main-path">
<h3>Create Main Path<a class="headerlink" href="#create-main-path" title="Permalink to this headline">¶</a></h3>
<p>Next, we’ll create a main path within this grid. The main path has a spawn point and a goal</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Math</span> <span class="pre">Path</span></code></p>
<img alt="_images/22.png" class="align-center" src="_images/22.png" />
<p>Unlink the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Grid</span></code> node from the <code class="docutils literal notranslate"><span class="pre">Result</span></code> node (do this by pressing Alt+LeftClick on the Create Grid Node’s border)</p>
<p>Click the Build button. A main path would have been created in the grid</p>
<img alt="_images/23.png" class="align-center" src="_images/23.png" />
<p>Keep hitting the <cite>Build</cite> button for different result</p>
<img alt="_images/24.gif" class="align-center" src="_images/24.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not see random results when you hit <cite>Build</cite>, make sure randomize is enabled.  Enable this by clicking the <cite>Settings</cite> button on the toolbar and choosing <cite>Editor Settings</cite>.  Then enabled <cite>Randomize Seed</cite></p>
</div>
<p>Select the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Main</span> <span class="pre">Path</span></code> node and inspect the properties</p>
<img alt="_images/25.png" class="align-center" src="_images/25.png" />
<p>We’ll leave everything to default for now</p>
<p>Notice the <cite>Path Name</cite> parameter is set to <code class="docutils literal notranslate"><span class="pre">main</span></code>   This is the name of the path and we will be referencing this path in the future nodes with this name</p>
<p>You can adjust the size of the path.   <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">Marker</span> <span class="pre">Name</span></code> and <code class="docutils literal notranslate"><span class="pre">Goal</span> <span class="pre">Marker</span> <span class="pre">Name</span></code> lets you specify a name for the markers. You can then create these markers in the theme file and add any object you like.    In the sample theme, there’s a marker already created with these names and a Player Start is placed under <code class="docutils literal notranslate"><span class="pre">SpawnPoint</span></code> marker and a level goal handler prefab is placed under <code class="docutils literal notranslate"><span class="pre">LevelGoal</span></code> marker</p>
<img alt="_images/26.png" class="align-center" src="_images/26.png" />
</div>
<div class="section" id="create-alternate-path">
<h3>Create Alternate Path<a class="headerlink" href="#create-alternate-path" title="Permalink to this headline">¶</a></h3>
<p>We’ll next create an alternate path branching off the main path so the player has another way of reaching the goal</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Path</span></code></p>
<img alt="_images/27.png" class="align-center" src="_images/27.png" />
<p>Connect the nodes together like below</p>
<img alt="_images/28.png" class="align-center" src="_images/28.png" />
<p>Leave all the properties as default and hit <cite>Build</cite></p>
<img alt="_images/29.png" class="align-center" src="_images/29.png" />
<p>Select the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Path</span></code> node and inspect the properties</p>
<img alt="_images/30.png" class="align-center" src="_images/30.png" />
<p>Change the <cite>Path Name</cite> from <code class="docutils literal notranslate"><span class="pre">branch</span></code> to <code class="docutils literal notranslate"><span class="pre">alt</span></code>.  We will be referencing this path as <code class="docutils literal notranslate"><span class="pre">alt</span></code> in the future</p>
<img alt="_images/31.png" class="align-center" src="_images/31.png" />
<p>You can specify the paths from which this path should start and end.    The <cite>Start From Path</cite> parameter is set to <code class="docutils literal notranslate"><span class="pre">main</span></code>, referencing the main path we created in the previous section</p>
<p>The <cite>End On Path</cite> is left empty, so the end of this path doesn’t connect back to anything.   We’d like this path to connect back to the main path.</p>
<p>Set the <cite>End On Path</cite> parameter to <code class="docutils literal notranslate"><span class="pre">main</span></code></p>
<img alt="_images/32.png" class="align-center" src="_images/32.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Min Path Size</strong></p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Path Size</strong></p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Path Name</strong></p></td>
<td><p>alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Node Color</strong></p></td>
<td><p>orange</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Start From Path</strong></p></td>
<td><p>main</p></td>
</tr>
<tr class="row-even"><td><p><strong>End On Path</strong></p></td>
<td><p>main</p></td>
</tr>
</tbody>
</table>
<p>This will make the alternate path (orange) connect back to the main path (green)</p>
<img alt="_images/34.png" class="align-center" src="_images/34.png" />
<p>Keep hitting Build for different results</p>
<img alt="_images/33.gif" class="align-center" src="_images/33.gif" />
<p>Assign a description to the node.  Select the <cite>Create Path</cite> node and set the description property to <code class="docutils literal notranslate"><span class="pre">Alternate</span> <span class="pre">Path</span></code></p>
<img alt="_images/32A.png" class="align-center" src="_images/32A.png" />
<img alt="_images/32B.png" class="align-center" src="_images/32B.png" />
</div>
<div class="section" id="create-treasure-room-main">
<h3>Create Treasure Room (Main)<a class="headerlink" href="#create-treasure-room-main" title="Permalink to this headline">¶</a></h3>
<p>We’ll add a treasure room connected to the main path</p>
<p>Add a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Path</span></code> and set it up as follows:</p>
<img alt="_images/35.png" class="align-center" src="_images/35.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Min Path Size</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Path Size</strong></p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Path Name</strong></p></td>
<td><p>treasure_main</p></td>
</tr>
<tr class="row-even"><td><p><strong>Node Color</strong></p></td>
<td><p>yellow</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Start From Path</strong></p></td>
<td><p>main</p></td>
</tr>
<tr class="row-even"><td><p><strong>End On Path</strong></p></td>
<td><p>main</p></td>
</tr>
</tbody>
</table>
<img alt="_images/36.png" class="align-center" src="_images/36.png" />
</div>
<div class="section" id="create-treasure-room-alt">
<h3>Create Treasure Room (Alt)<a class="headerlink" href="#create-treasure-room-alt" title="Permalink to this headline">¶</a></h3>
<p>We’ll add another treasure room connected to the <code class="docutils literal notranslate"><span class="pre">alt</span></code> path but keep the <code class="docutils literal notranslate"><span class="pre">End</span> <span class="pre">On</span> <span class="pre">Path</span></code> parameter empty so it doesn’t connect back to anything:</p>
<p>Add a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Path</span></code> and set it up as follows:</p>
<img alt="_images/37.png" class="align-center" src="_images/37.png" />
<img alt="_images/38.png" class="align-center" src="_images/38.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Min Path Size</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Path Size</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Path Name</strong></p></td>
<td><p>treasure_alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Node Color</strong></p></td>
<td><p>yellow</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Start From Path</strong></p></td>
<td><p>alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>End On Path</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<img alt="_images/39.png" class="align-center" src="_images/39.png" />
</div>
<div class="section" id="create-key-room">
<h3>Create Key Room<a class="headerlink" href="#create-key-room" title="Permalink to this headline">¶</a></h3>
<p>We’ll create a room connected to the main path which will act as the key room. We’ll later configure this room to have a key that opens up a lock in the main path. It will also have a NPC (key guardian) guarding the key</p>
<p>Add a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Path</span></code> and set it up as follows:</p>
<img alt="_images/40.png" class="align-center" src="_images/40.png" />
<img alt="_images/41.png" class="align-center" src="_images/41.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Min Path Size</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Path Size</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Path Name</strong></p></td>
<td><p>key_room</p></td>
</tr>
<tr class="row-even"><td><p><strong>Node Color</strong></p></td>
<td><p>cyan</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Start From Path</strong></p></td>
<td><p>main</p></td>
</tr>
<tr class="row-even"><td><p><strong>End On Path</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<img alt="_images/42.png" class="align-center" src="_images/42.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We’ve named this path <code class="docutils literal notranslate"><span class="pre">key_room</span></code>. It will be referenced later on when creating the key locks</p>
</div>
</div>
<div class="section" id="create-key-lock-main">
<h3>Create Key-Lock (Main)<a class="headerlink" href="#create-key-lock-main" title="Permalink to this headline">¶</a></h3>
<p>We’ll next create a key-lock system on the main path.  Our key will go on the Key Room we created earlier (<code class="docutils literal notranslate"><span class="pre">key_room</span></code> path) and the lock will be somewhere in the main branch (<code class="docutils literal notranslate"><span class="pre">main</span></code> path)</p>
<p>Add a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Key</span> <span class="pre">Lock</span></code> and set it up as follows:</p>
<img alt="_images/43.png" class="align-center" src="_images/43.png" />
<img alt="_images/44.png" class="align-center" src="_images/44.png" />
<img alt="_images/46.png" class="align-center" src="_images/46.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Key Branch</strong></p></td>
<td><p>key_room</p></td>
</tr>
<tr class="row-even"><td><p><strong>Lock Branch</strong></p></td>
<td><p>main</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Key Marker Name</strong></p></td>
<td><p>KeyRed</p></td>
</tr>
<tr class="row-even"><td><p><strong>Lock Marker Name</strong></p></td>
<td><p>LockRed</p></td>
</tr>
</tbody>
</table>
<img alt="_images/45.png" class="align-center" src="_images/45.png" />
<p>Specify the <cite>Key Branch</cite> as <code class="docutils literal notranslate"><span class="pre">key_room</span></code> and <cite>Lock Branch</cite> as <code class="docutils literal notranslate"><span class="pre">main</span></code></p>
<p>Set marker name for the key as <code class="docutils literal notranslate"><span class="pre">KeyRed</span></code> and lock as <code class="docutils literal notranslate"><span class="pre">LockRed</span></code>.    Then in the theme file, you’d create marker nodes with these names and add your key and locked gate prefabs.</p>
<p>The sample theme already has these setup</p>
<img alt="_images/KeyRed.png" class="align-center" src="_images/KeyRed.png" />
</div>
<div class="section" id="create-key-lock-treasure-main">
<h3>Create Key-Lock (Treasure Main)<a class="headerlink" href="#create-key-lock-treasure-main" title="Permalink to this headline">¶</a></h3>
<p>We need a key-lock to guard the treasure room in the main branch</p>
<p>Add a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Key</span> <span class="pre">Lock</span></code> and set it up as follows:</p>
<img alt="_images/47.png" class="align-center" src="_images/47.png" />
<img alt="_images/48.png" class="align-center" src="_images/48.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Key Branch</strong></p></td>
<td><p>main</p></td>
</tr>
<tr class="row-even"><td><p><strong>Lock Branch</strong></p></td>
<td><p>treasure_main</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Key Marker Name</strong></p></td>
<td><p>KeyYellow</p></td>
</tr>
<tr class="row-even"><td><p><strong>Lock Marker Name</strong></p></td>
<td><p>LockYellow</p></td>
</tr>
</tbody>
</table>
<img alt="_images/49.png" class="align-center" src="_images/49.png" />
<p>Set marker name for the key as <code class="docutils literal notranslate"><span class="pre">KeyYellow</span></code> and lock as <code class="docutils literal notranslate"><span class="pre">LockYellow</span></code>.    Then in the theme file, you’d create marker nodes with these names and add your key and locked gate prefabs.</p>
<p>The sample theme already has these setup</p>
<img alt="_images/KeyYellow.png" class="align-center" src="_images/KeyYellow.png" />
</div>
<div class="section" id="spawn-enemies-main-alt">
<h3>Spawn Enemies (Main, Alt)<a class="headerlink" href="#spawn-enemies-main-alt" title="Permalink to this headline">¶</a></h3>
<p>We’ll use the <code class="docutils literal notranslate"><span class="pre">Spawn</span> <span class="pre">Items</span></code> node to spawn enemies on the <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">alt</span></code> paths</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Spawn</span> <span class="pre">Items</span></code> and set it up as follows:</p>
<img alt="_images/50.png" class="align-center" src="_images/50.png" />
<img alt="_images/52.png" class="align-center" src="_images/52.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Paths</strong></p></td>
<td><p>main, alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Item Type</strong></p></td>
<td><p>Enemy</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Marker Name</strong></p></td>
<td><p>Grunt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Min Count</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Count</strong></p></td>
<td><p>5</p></td>
</tr>
</tbody>
</table>
<img alt="_images/51.png" class="align-center" src="_images/51.png" />
<img alt="_images/53.png" class="align-center" src="_images/53.png" />
<p>This will spawn enemies in the nodes, gradually increasing the number of enemies based on the difficulty. The difficulty increases as we get closer to the goal. You can control this from the <cite>Spawn Method</cite> properties. Leave it to default for now</p>
<p>We’ve specified the marker name as <code class="docutils literal notranslate"><span class="pre">Grunt</span></code> and an appropriate marker node should be created in the theme file so we can spawn prefabs under it.  The sample theme already has this marker</p>
<img alt="_images/54.png" class="align-center" src="_images/54.png" />
</div>
<div class="section" id="spawn-bonus-treasure-chests">
<h3>Spawn Bonus (Treasure Chests)<a class="headerlink" href="#spawn-bonus-treasure-chests" title="Permalink to this headline">¶</a></h3>
<p>Spawn treasure chests in your bonus rooms using the <cite>Spawn Items</cite> node</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Spawn</span> <span class="pre">Items</span></code> and set it up as follows:</p>
<img alt="_images/55.png" class="align-center" src="_images/55.png" />
<img alt="_images/56.png" class="align-center" src="_images/56.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Paths</strong></p></td>
<td><p>treasure_main, treasure_alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Item Type</strong></p></td>
<td><p>Treasure</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Marker Name</strong></p></td>
<td><p>Treasure</p></td>
</tr>
<tr class="row-even"><td><p><strong>Min Count</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Count</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Min Spawn Difficulty</strong></p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<img alt="_images/57.png" class="align-center" src="_images/57.png" />
<p>We’ve specified the marker name as <code class="docutils literal notranslate"><span class="pre">Treasure</span></code> and an appropriate marker node should be created in the theme file so we can spawn prefabs the treasure chest under it.</p>
<p>The <cite>Min Spawn Difficulty</cite> is set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.   The first node in the branch will have a difficulty of <code class="docutils literal notranslate"><span class="pre">0</span></code> and the last node <code class="docutils literal notranslate"><span class="pre">1</span></code>.  Sometimes, the yellow branch may be 3 nodes long.  Since we want the chest to occur only on the last node, we’ve set this value to <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
</div>
<div class="section" id="spawn-key-guardian">
<h3>Spawn Key Guardian<a class="headerlink" href="#spawn-key-guardian" title="Permalink to this headline">¶</a></h3>
<p>We’ll add an NPC in the Key room guarding the key</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Spawn</span> <span class="pre">Items</span></code> and set it up as follows:</p>
<img alt="_images/58.png" class="align-center" src="_images/58.png" />
<img alt="_images/59.png" class="align-center" src="_images/59.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Paths</strong></p></td>
<td><p>key_room</p></td>
</tr>
<tr class="row-even"><td><p><strong>Item Type</strong></p></td>
<td><p>Enemy</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Marker Name</strong></p></td>
<td><p>KeyGuardian</p></td>
</tr>
<tr class="row-even"><td><p><strong>Min Count</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Count</strong></p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<img alt="_images/60.png" class="align-center" src="_images/60.png" />
<p>You’ll need to create a marker named <code class="docutils literal notranslate"><span class="pre">KeyGuardian</span></code> in the theme file and place your NPC prefab under it.   This marker doesn’t exist in the sample theme and you’ll need to create it yourself if you want to visualize it</p>
</div>
<div class="section" id="spawn-health-pack">
<h3>Spawn Health Pack<a class="headerlink" href="#spawn-health-pack" title="Permalink to this headline">¶</a></h3>
<p>We’ll use the <cite>Spawn Items</cite> node to spawn a few health pickups along the <cite>main</cite> and <cite>alt</cite> paths</p>
<p>This section also shows you how to use the <cite>Custom</cite> Item Type</p>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Spawn</span> <span class="pre">Items</span></code> and set it up as follows:</p>
<img alt="_images/61.png" class="align-center" src="_images/61.png" />
<img alt="_images/62.png" class="align-center" src="_images/62.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Paths</strong></p></td>
<td><p>main, alt</p></td>
</tr>
<tr class="row-even"><td><p><strong>Item Type</strong></p></td>
<td><p>Custom</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Marker Name</strong></p></td>
<td><p>HealthPickup</p></td>
</tr>
<tr class="row-even"><td><p><strong>Min Count</strong></p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Count</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Spawn Method</strong></p></td>
<td><p>Random Range</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Spawn Probability</strong></p></td>
<td><p>0.4</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p><strong>Custom Item Info</strong></p></td>
</tr>
<tr class="row-odd"><td><p>&gt;&gt; <strong>Preview Text</strong></p></td>
<td><p>H</p></td>
</tr>
<tr class="row-even"><td><p>&gt;&gt; <strong>Text Color</strong></p></td>
<td><p>[Red]</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;&gt; <strong>Background Color</strong></p></td>
<td><p>[White]</p></td>
</tr>
</tbody>
</table>
<img alt="_images/63.png" class="align-center" src="_images/63.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You’ll need to create a marker named <code class="docutils literal notranslate"><span class="pre">HealthPickup</span></code> in your theme file and add your health pack actor. The sample theme doesn’t contain this</p>
</div>
</div>
<div class="section" id="finalize-layout-graph">
<h3>Finalize Layout Graph<a class="headerlink" href="#finalize-layout-graph" title="Permalink to this headline">¶</a></h3>
<p>After we are done designing the layout graph, we’ll need to finalize it with the <cite>Finalize Graph</cite> node.    This node does a few things:</p>
<ul class="simple">
<li><p>Move the locks from the nodes on to the links</p></li>
<li><p>Create one way doors (so we don’t go around locked doors)</p></li>
<li><p>Assign room types (Room, Corridor, Cave)</p></li>
</ul>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Layout</span> <span class="pre">Graph</span> <span class="pre">&gt;</span> <span class="pre">Finalize</span> <span class="pre">Graph</span></code> and set it up as follows:</p>
<img alt="_images/64.png" class="align-center" src="_images/64.png" />
<img alt="_images/65.png" class="align-center" src="_images/65.png" />
<p>Leave all the properties to default</p>
<img alt="_images/67.png" class="align-center" src="_images/67.png" />
<img alt="_images/66.gif" class="align-center" src="_images/66.gif" />
<p>We are now ready to create a tilemap from this</p>
</div>
<div class="section" id="create-tilemap">
<h3>Create Tilemap<a class="headerlink" href="#create-tilemap" title="Permalink to this headline">¶</a></h3>
<p>Create a new node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Initialize</span> <span class="pre">Tilemap</span></code> and set it up as follows:</p>
<img alt="_images/70.png" class="align-center" src="_images/70.png" />
<img alt="_images/68.png" class="align-center" src="_images/68.png" />
<img alt="_images/69.png" class="align-center" src="_images/69.png" />
<img alt="_images/71.png" class="align-center" src="_images/71.png" />
<p>You can control the thickness of the caves from the <cite>Cave Thickness</cite> parameter.   Each node on the layout graph gets converted into rooms in the tilemap.</p>
<p>The parameter <cite>Tilemap Size Per Node</cite> controls how many tiles are used to generate a room from the node. Bump this number up if you want more space in your rooms</p>
<p>If you want a more uniform grid like look on your rooms, bring the <cite>Perturb Amount</cite> close to <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
<p>When you select a node on the layout graph, the tiles that belong to the node light up.  This is controlled by the <cite>Color Settings</cite> parameters</p>
<p><cite>Layout Padding</cite> adds extra tiles around the dungeon layout.   Set this value to <code class="docutils literal notranslate"><span class="pre">5</span></code> so we can apply some decorations outside the dungeon bounds</p>
<img alt="_images/72.png" class="align-center" src="_images/72.png" />
<img alt="_images/73.gif" class="align-center" src="_images/73.gif" />
</div>
<div class="section" id="d-viewport">
<h3>3D Viewport<a class="headerlink" href="#d-viewport" title="Permalink to this headline">¶</a></h3>
<p>After you’ve initialized a tilemap, you now start to see a dungeon generated in the 3D viewport, representing by the tilemap.</p>
<img alt="_images/116.jpg" class="align-center" src="_images/116.jpg" />
<p>The dungeon uses a default theme and the preview theme can be changed from the settings</p>
<img alt="_images/117.png" class="align-center" src="_images/117.png" />
<img alt="_images/118.png" class="align-center" src="_images/118.png" />
</div>
<div class="section" id="add-background-elevation">
<h3>Add Background Elevation<a class="headerlink" href="#add-background-elevation" title="Permalink to this headline">¶</a></h3>
<p>We are going to create overlays and merge them with the original tilemap.   Create the following two nodes:</p>
<ul class="simple">
<li><p>Create a node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Elevation</span></code></p></li>
<li><p>Create a node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Merge</span> <span class="pre">Tilemaps</span></code></p></li>
</ul>
<img alt="_images/74.png" class="align-center" src="_images/74.png" />
<img alt="_images/75.png" class="align-center" src="_images/75.png" />
<p>Link them up like below:</p>
<img alt="_images/76.png" class="align-center" src="_images/76.png" />
<div class="figure align-center" id="id5">
<img alt="_images/77.png" src="_images/77.png" />
<p class="caption"><span class="caption-text">Create Tilemap Elevation properties</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>Update the properties</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Noise Frequency</strong></p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Num Steps</strong></p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Min Height</strong></p></td>
<td><p>-10</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Height</strong></p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Sea Level</strong></p></td>
<td><p>-1</p></td>
</tr>
<tr class="row-even"><td><p><strong>Land Color</strong></p></td>
<td><p>Brown (HexLinear <code class="docutils literal notranslate"><span class="pre">291A10FF</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Sea Color</strong></p></td>
<td><p>Blue (HexLinear <code class="docutils literal notranslate"><span class="pre">003C66FF</span></code>)</p></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id6">
<img alt="_images/78.png" src="_images/78.png" />
<p class="caption"><span class="caption-text">Create Tilemap Elevation Node Result</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id7">
<img alt="_images/78B.png" src="_images/78B.png" />
<p class="caption"><span class="caption-text">Merged Result</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id8">
<img alt="_images/79.jpg" src="_images/79.jpg" />
<p class="caption"><span class="caption-text">Dungeon Preview</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>We’ve specified the marker name as <code class="docutils literal notranslate"><span class="pre">Elevation</span></code>.   If you place objects under the specified marker node in the theme editor, they will show up on these tiles at the given height.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Min/Max height is logical and will be mulitplied by the dungeon config’s Grid Size Y value.  If the GridSize is <code class="docutils literal notranslate"><span class="pre">(400,</span> <span class="pre">200,</span> <span class="pre">400)</span></code> in the Dungeon actor’s config and the tile height happens to be <code class="docutils literal notranslate"><span class="pre">2.5</span></code>, the actual placement will be on <code class="docutils literal notranslate"><span class="pre">2.5</span> <span class="pre">*</span> <span class="pre">200</span> <span class="pre">=</span> <span class="pre">500</span> <span class="pre">unreal</span> <span class="pre">units</span> <span class="pre">high</span></code></p>
</div>
<p>The sample theme file already contains a marker named ‘Elevation’ which shows the purple/blue tiles on the scene</p>
<img alt="_images/80.png" class="align-center" src="_images/80.png" />
<p>There are two nodes attached with material overrides (purple and blue for land and sea tiles).  There’s a selector logic on the first node that gets selected if the tile is below sea level.</p>
</div>
<div class="section" id="add-grass-overlays">
<h3>Add Grass Overlays<a class="headerlink" href="#add-grass-overlays" title="Permalink to this headline">¶</a></h3>
<p>We’ll overlay some foliage on our dungeon using a noise parameter. Dungeon Architect always places the overlays in a way that they will not block the main path and the level will be playable.  You can overlay rocks, trees and other blocking objects as well</p>
<p>Create a node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">Overlay</span></code></p>
<img alt="_images/81.png" class="align-center" src="_images/81.png" />
<div class="figure align-center" id="id9">
<img alt="_images/83.png" src="_images/83.png" />
<p class="caption"><span class="caption-text">Create Overlay Node Connection</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id10">
<img alt="_images/84.png" src="_images/84.png" />
<p class="caption"><span class="caption-text">Create Overlay Node properties</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 54%" />
<col style="width: 46%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Marker Name</strong></p></td>
<td><p>Grass</p></td>
</tr>
<tr class="row-even"><td><p><strong>Overlay Blocks Tile</strong></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p><strong>Noise Settings</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>&gt; Noise Frequency</strong></p></td>
<td><p>0.15</p></td>
</tr>
<tr class="row-odd"><td><p><strong>&gt; Noise Max Value</strong></p></td>
<td><p>1.49</p></td>
</tr>
<tr class="row-even"><td><p><strong>&gt; Noise Threshold</strong></p></td>
<td><p>0.5</p></td>
</tr>
<tr class="row-odd"><td><p><strong>&gt; Min Dist From Main Path</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p><strong>Merge Config</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>&gt; Max Height</strong></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><strong>&gt; Wall Override Rule</strong></p></td>
<td><p>Keep Wall Remove Overlay</p></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id11">
<img alt="_images/85.png" src="_images/85.png" />
<p class="caption"><span class="caption-text">Result of the Grass Overlay Node</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id12">
<img alt="_images/86.png" src="_images/86.png" />
<p class="caption"><span class="caption-text">Merged result</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<p>We’ve specified the marker name as <code class="docutils literal notranslate"><span class="pre">Grass</span></code>.   You’ll need to create this marker in the theme file and assign a mesh there.  The sample theme already contains this</p>
<img alt="_images/82.png" class="align-center" src="_images/82.png" />
<div class="figure align-center" id="id13">
<img alt="_images/87.jpg" src="_images/87.jpg" />
<p class="caption"><span class="caption-text">Dungeon Preview</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id14">
<img alt="_images/88.gif" src="_images/88.gif" />
<p class="caption"><span class="caption-text">Before / After Tilemap Result</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id15">
<img alt="_images/89.gif" src="_images/89.gif" />
<p class="caption"><span class="caption-text">Before / After Dungeon Result</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="finalize-tilemap">
<h3>Finalize Tilemap<a class="headerlink" href="#finalize-tilemap" title="Permalink to this headline">¶</a></h3>
<p>Finalize the tilemap to complete the grid flow graph</p>
<p>Create a node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Finalize</span> <span class="pre">Tilemap</span></code></p>
<img alt="_images/90.png" class="align-center" src="_images/90.png" />
<img alt="_images/92.png" class="align-center" src="_images/92.png" />
<img alt="_images/91.png" class="align-center" src="_images/91.png" />
<p>Finalize Tilemap node places all the items on to the tilemap (enemies, keys, bonus etc)</p>
</div>
<div class="section" id="optimize-tilemap">
<h3>Optimize Tilemap<a class="headerlink" href="#optimize-tilemap" title="Permalink to this headline">¶</a></h3>
<p>When the tilemap based level is generated, there are many tiles that the player might never see, as they are far away from the dungeon layout</p>
<div class="figure align-center">
<img alt="_images/98.jpg" src="_images/98.jpg" />
</div>
<p>The <cite>Optimize Tilemap</cite> removes tiles that are away from the specified distance from the dungeon layout bounds</p>
<div class="figure align-center" id="id16">
<img alt="_images/96.png" src="_images/96.png" />
<p class="caption"><span class="caption-text">Optimize Tilemap Node Result</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<p>Create a node <code class="docutils literal notranslate"><span class="pre">Tilemap</span> <span class="pre">&gt;</span> <span class="pre">Optimize</span> <span class="pre">Tilemap</span></code></p>
<div class="figure align-center">
<img alt="_images/93.png" src="_images/93.png" />
</div>
<p>Connect it before the <cite>Finalize Tilemap</cite> node like below:</p>
<div class="figure align-center">
<img alt="_images/99.png" src="_images/99.png" />
</div>
<p>Set the <cite>Discard Distance from Layout</cite> value to <code class="docutils literal notranslate"><span class="pre">5</span></code></p>
<div class="figure align-center" id="id17">
<img alt="_images/100.png" src="_images/100.png" />
<p class="caption"><span class="caption-text">Optimize Tilemap Node properties</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<p>This will drop any tiles that are 5 tiles away from the nearest layout tile</p>
<div class="figure align-center" id="id18">
<img alt="_images/97.gif" src="_images/97.gif" />
<p class="caption"><span class="caption-text">Optimize Tilemap Before / After</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id19">
<img alt="_images/95.gif" src="_images/95.gif" />
<p class="caption"><span class="caption-text">Optimize Dungeon Preview Before / After</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="key-lock-system">
<h2>Key Lock System<a class="headerlink" href="#key-lock-system" title="Permalink to this headline">¶</a></h2>
<p>The  Key and Lock actors that were spawned by the theme engine would have the <cite>Item Metadata</cite> filled up by Dungeon Architect, provided the actor has the <code class="docutils literal notranslate"><span class="pre">Dungeon</span> <span class="pre">Flow</span> <span class="pre">Item</span> <span class="pre">Metadata</span></code> component attached to it</p>
<p>In the sample, the Key and Lock blueprints has the above component added to it</p>
<div class="figure align-center" id="id20">
<img alt="_images/101.png" src="_images/101.png" />
<p class="caption"><span class="caption-text">Key blueprint</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id21">
<img alt="_images/102.png" src="_images/102.png" />
<p class="caption"><span class="caption-text">Lock blueprint</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<p>When these actors are spawned in the scene, the item information will be filled in.   This includes the <cite>Item Id</cite>, list of references to other items (like keys referencing all the other lock ids it can open)</p>
<div class="figure align-center" id="id22">
<img alt="_images/103.jpg" src="_images/103.jpg" />
<p class="caption"><span class="caption-text">Key Metadata</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id23">
<img alt="_images/104.jpg" src="_images/104.jpg" />
<p class="caption"><span class="caption-text">Lock Metadata</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</div>
<p>Notice the Key metadata has a reference to the red locked door’s id</p>
<img alt="_images/105.jpg" class="align-center" src="_images/105.jpg" />
<div class="section" id="sample">
<h3>Sample<a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h3>
<p>Try out the Game Sample from the Launch Pad. Navigate to <code class="docutils literal notranslate"><span class="pre">Launch</span> <span class="pre">Pad</span> <span class="pre">&gt;</span> <span class="pre">Samples</span> <span class="pre">&gt;</span> <span class="pre">Grid</span> <span class="pre">Flow</span> <span class="pre">Builder</span> <span class="pre">&gt;</span> <span class="pre">Grid</span> <span class="pre">Flow</span> <span class="pre">Game</span> <span class="pre">&gt;</span> <span class="pre">Clone</span> <span class="pre">Scene</span></code></p>
<img alt="_images/106.jpg" class="align-center" src="_images/106.jpg" />
<p>The GridFlow game sample contains a working example of how you can implement a key lock system. There are many ways of implementing this, this sample shows one such way.</p>
<p>The Sample has the following scripts:</p>
<ul class="simple">
<li><p>Inventory: Saves the picked up keys in the inventory</p></li>
<li><p>LockedDoor: Blueprint function <code class="docutils literal notranslate"><span class="pre">CanOpenDoor</span></code> to check if the door can be opened. This is done by checking if the collided actor has an inventory. If so, it checks if the inventory contains a key that can open this locked door id</p></li>
</ul>
<p>Check the door blueprint <code class="docutils literal notranslate"><span class="pre">Dungeon</span> <span class="pre">Architect</span> <span class="pre">Content</span> <span class="pre">&gt;</span> <span class="pre">Builders</span> <span class="pre">&gt;</span> <span class="pre">GridFlowContent</span> <span class="pre">&gt;</span> <span class="pre">Art</span> <span class="pre">&gt;</span> <span class="pre">Blueprints</span> <span class="pre">&gt;</span>&#160; <span class="pre">Locks</span> <span class="pre">&gt;</span> <span class="pre">BP_GFT_LockBase</span> <span class="pre">&gt;</span> <span class="pre">CanOpenDoor</span></code></p>
</div>
</div>
<div class="section" id="mini-map">
<h2>Mini-Map<a class="headerlink" href="#mini-map" title="Permalink to this headline">¶</a></h2>
<p>Display a 2D minimap with fog of war</p>
<img alt="_images/107.jpg" class="align-center" src="_images/107.jpg" />
<p>Drop in a <cite>Grid Flow Mini Map</cite> actor on to the scene and configure it like below</p>
<img alt="_images/108.png" class="align-center" src="_images/108.png" />
<img alt="_images/109.png" class="align-center" src="_images/109.png" />
<img alt="_images/110.png" class="align-center" src="_images/110.png" />
<p>Check the player controller on how to initialize the minimap and show it on the screen <code class="docutils literal notranslate"><span class="pre">DungeonArchitect</span> <span class="pre">Content</span> <span class="pre">&gt;</span> <span class="pre">Samples</span> <span class="pre">&gt;</span> <span class="pre">DA_GridFlow_Game</span> <span class="pre">&gt;</span> <span class="pre">Blueprints</span> <span class="pre">&gt;</span> <span class="pre">BP_GridFlowDemo_PlayerController</span></code></p>
<div class="figure align-center" id="id24">
<img alt="_images/111.png" src="_images/111.png" />
<p class="caption"><span class="caption-text"><cite>Right Click &gt; Open Image In New Tab</cite> for a clearer image</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</div>
<img alt="_images/112.png" class="align-center" src="_images/112.png" />
<p>Check the HUD widget on how to display this in the screen</p>
<p><code class="docutils literal notranslate"><span class="pre">DungeonArchitect</span> <span class="pre">Content</span> <span class="pre">&gt;</span> <span class="pre">Samples</span> <span class="pre">&gt;</span> <span class="pre">DA_GridFlow_Game</span> <span class="pre">&gt;</span> <span class="pre">UI</span> <span class="pre">&gt;</span> <span class="pre">UI_GridFowDemo_HUD</span></code></p>
<div class="section" id="minimap-tracked-objects">
<h3>Minimap Tracked Objects<a class="headerlink" href="#minimap-tracked-objects" title="Permalink to this headline">¶</a></h3>
<p>To track an object in the minimap, simple add the <code class="docutils literal notranslate"><span class="pre">DungeonMiniMapTrackedObject</span></code> component to it and configure it.</p>
<img alt="_images/114.png" class="align-center" src="_images/114.png" />
<img alt="_images/113.png" class="align-center" src="_images/113.png" />
<p>The id maps to the id you specified in the MiniMap actor’s icon list</p>
<img alt="_images/115.png" class="align-center" src="_images/115.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="builder_snap_flow.html" class="btn btn-neutral float-right" title="Snap Flow Builder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="launch_pad.html" class="btn btn-neutral float-left" title="Launch Pad Window" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Code Respawn

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>